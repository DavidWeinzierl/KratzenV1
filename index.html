<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kratzen Online</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="game-board">
        <div id="player-area-2" class="player-area player-area-top">Player 3</div>
        <div id="player-area-1" class="player-area player-area-left">Player 2</div>
        <div id="player-area-3" class="player-area player-area-right">Player 4 (if exists)</div>

        <div id="center-area">
            <div id="game-info">
               <div class="game-info-content">
                   <div id="trump-card-display">-</div>
                   <div id="talon-display">
                       <!-- Content (card back and label) will be added by JS -->
                   </div>
               </div>
            </div>
           <div id="trick-area">
               <!-- Cards played to the trick appear here -->
           </div>
       </div>

        <div id="player-area-0" class="player-area player-area-bottom">Player 1 (You/Observer)</div>
    </div>

    <div id="controls">
        <button id="hide-cards-toggle" style="margin-right: 10px;">Karten anzeigen</button>
        <label style="margin-right: 10px;">
            <input type="checkbox" id="manual-mode-toggle" checked> Manual Mode
        </label>
        <!-- "Next Step" button REMOVED from here -->
        <label for="animation-speed-slider" style="margin-left: 20px; margin-right: 5px;">Animation Speed:</label>
        <input type="range" id="animation-speed-slider" min="1" max="10" step="1" value="9"> <!-- MODIFIED min, max, step, value -->
        <span id="animation-speed-value" style="width: 30px; display: inline-block; text-align: right;">5</span> <!-- MODIFIED initial display -->
    </div>

    <div id="dynamic-buttons-master-container">
        <!-- Dynamically populated by uiRenderer.js -->
    </div>

    <div id="log-container">
        <div id="log-box"></div>
    </div>

    <div id="simulation-container">
        <h2>Simulation Settings & Strategy</h2>

        <!-- Einsatz Section (Costs/Penalties) -->
        <div id="einsatz-container" class="simulation-section">
            <h3>Einsatz (Costs/Penalties) - Applied to All</h3>
            <div class="slider-group">
                <label for="dealer-ante-slider">Einsatz:</label>
                <input type="range" id="dealer-ante-slider" name="dealerAnte" min="0" max="1" step="0.1" value="0.2">
                <span class="value-display" id="dealer-ante-value">1.0</span>
            </div>
            <div class="slider-group">
                <label for="no-loser-penalty-slider">Muas:   </label>
                <input type="range" id="no-loser-penalty-slider" name="noLoserPenalty" min="0" max="1" step="0.1" value="0.2">
                <span class="value-display" id="no-loser-penalty-value">1.0</span>
            </div>
        </div>

        <!-- Strategy Variables Section -->
        <div id="strategy-variables-container" class="simulation-section">
            <h3>Strategy Variables</h3>
            <!-- Player 1 Strategy Parameters -->
            <h4>Player 1 (P0) Strategy:</h4>
            <h5>Bidding Phase 1 (P0):</h5>
            <div class="slider-group">
                <label for="min-companion-trump-value-select-p1">Min Companion Trump (for Sneak w/ Ace):</label>
                <select id="min-companion-trump-value-select-p1">
                    <option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="X" selected>X (10)</option><option value="U">U (Unter)</option><option value="O">O (Ober)</option><option value="K">K (King)</option><option value="A">A (Ace)</option>
                </select>
            </div>
            <div class="slider-group">
                <label for="solo-ace-sneak-chance-slider-p1">Solo Trump Ace Sneak Chance:</label>
                <input type="range" id="solo-ace-sneak-chance-slider-p1" min="0" max="1" step="0.05" value="0.3">
                <span class="value-display" id="solo-ace-sneak-chance-value-p1">0.30</span>
            </div>
            <div class="slider-group">
                <label for="min-trump-oder-mit-select-p1">Min Trump (for Oder Mit w/ Weli & non-Trump Ace):</label>
                <select id="min-trump-oder-mit-select-p1">
                    <option value="7">7</option><option value="8">8</option><option value="9" selected>9</option><option value="X">X (10)</option><option value="U">U (Unter)</option><option value="O">O (Ober)</option><option value="K">K (King)</option><option value="A">A (Ace)</option>
                </select>
            </div>
            <div class="slider-group">
                <label for="always-sneak-last-no-bid-checkbox-p1">Always Sneak if Last (Solo Ace, No Bids Yet):</label>
                <input type="checkbox" id="always-sneak-last-no-bid-checkbox-p1" checked>
            </div>

            <h5>Bidding Phase 2 (P0):</h5>
            <div class="slider-group">
                <label for="min-trump-value-play-sneaker-select-p1">Min Trump Value (to Play w/ Sneaker):</label>
                <select id="min-trump-value-play-sneaker-select-p1">
                    <option value="7">7</option><option value="8">8</option><option value="9" selected>9</option><option value="X">X (10)</option><option value="U">U (Unter)</option><option value="O">O (Ober)</option><option value="K">K (King)</option><option value="A">A (Ace)</option>
                </select>
            </div>
            <div class="slider-group">
                <label for="low-trump-play-chance-slider-p1">Low Trump Play Chance (w/ Sneaker):</label>
                <input type="range" id="low-trump-play-chance-slider-p1" min="0" max="1" step="0.05" value="0.3">
                <span class="value-display" id="low-trump-play-chance-value-p1">0.30</span>
            </div>
            <div class="slider-group">
                <label for="min-suit-value-oder-play-select-p1">Min Suit Value (for Oder Play, 3 suits):</label>
                <select id="min-suit-value-oder-play-select-p1">
                    <option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="X">X (10)</option><option value="U" selected>U (Unter)</option><option value="O">O (Ober)</option><option value="K">K (King)</option>
                </select>
            </div>
            <div class="slider-group">
                <label for="play-if-last-no-one-joined-checkbox-p1">Play if Last (No One Joined Sneaker/Oder):</label>
                <input type="checkbox" id="play-if-last-no-one-joined-checkbox-p1" checked>
            </div>

            <h5>Exchange Phase (P0):</h5>
            <div class="slider-group">
                <label for="max-trump-value-trumpfpackerl-select-p1">Max Trump Value (for Trumpf-Packerl):</label>
                <select id="max-trump-value-trumpfpackerl-select-p1">
                    <option value="7">7</option><option value="8">8</option><option value="9" selected>9</option><option value="X">X (10)</option><option value="U">U (Unter)</option>
                </select>
            </div>
             <div class="slider-group">
                <label for="consider-sau-if-planned-checkbox-p1">Consider "4 auf die Sau" if Planned:</label>
                <input type="checkbox" id="consider-sau-if-planned-checkbox-p1" checked>
            </div>
            <hr style="margin: 15px 0;">

            <!-- Other Players Strategy Parameters -->
            <h4>Other Players (P1, P2, P3) Strategy:</h4>
            <h5>Bidding Phase 1 (Others):</h5>
            <div class="slider-group">
                <label for="min-companion-trump-value-select-others">Min Companion Trump (for Sneak w/ Ace):</label>
                <select id="min-companion-trump-value-select-others">
                    <option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="X" selected>X (10)</option><option value="U">U (Unter)</option><option value="O">O (Ober)</option><option value="K">K (King)</option><option value="A">A (Ace)</option>
                </select>
            </div>
            <div class="slider-group">
                <label for="solo-ace-sneak-chance-slider-others">Solo Trump Ace Sneak Chance:</label>
                <input type="range" id="solo-ace-sneak-chance-slider-others" min="0" max="1" step="0.05" value="0.3">
                <span class="value-display" id="solo-ace-sneak-chance-value-others">0.30</span>
            </div>
            <div class="slider-group">
                <label for="min-trump-oder-mit-select-others">Min Trump (for Oder Mit w/ Weli & non-Trump Ace):</label>
                <select id="min-trump-oder-mit-select-others">
                    <option value="7">7</option><option value="8">8</option><option value="9" selected>9</option><option value="X">X (10)</option><option value="U">U (Unter)</option><option value="O">O (Ober)</option><option value="K">K (King)</option><option value="A">A (Ace)</option>
                </select>
            </div>
            <div class="slider-group">
                <label for="always-sneak-last-no-bid-checkbox-others">Always Sneak if Last (Solo Ace, No Bids Yet):</label>
                <input type="checkbox" id="always-sneak-last-no-bid-checkbox-others" checked>
            </div>

            <h5>Bidding Phase 2 (Others):</h5>
            <div class="slider-group">
                <label for="min-trump-value-play-sneaker-select-others">Min Trump Value (to Play w/ Sneaker):</label>
                <select id="min-trump-value-play-sneaker-select-others">
                    <option value="7">7</option><option value="8">8</option><option value="9" selected>9</option><option value="X">X (10)</option><option value="U">U (Unter)</option><option value="O">O (Ober)</option><option value="K">K (King)</option><option value="A">A (Ace)</option>
                </select>
            </div>
            <div class="slider-group">
                <label for="low-trump-play-chance-slider-others">Low Trump Play Chance (w/ Sneaker):</label>
                <input type="range" id="low-trump-play-chance-slider-others" min="0" max="1" step="0.05" value="0.3">
                <span class="value-display" id="low-trump-play-chance-value-others">0.30</span>
            </div>
            <div class="slider-group">
                <label for="min-suit-value-oder-play-select-others">Min Suit Value (for Oder Play, 3 suits):</label>
                <select id="min-suit-value-oder-play-select-others">
                    <option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="X">X (10)</option><option value="U" selected>U (Unter)</option><option value="O">O (Ober)</option><option value="K">K (King)</option>
                </select>
            </div>
            <div class="slider-group">
                <label for="play-if-last-no-one-joined-checkbox-others">Play if Last (No One Joined Sneaker/Oder):</label>
                <input type="checkbox" id="play-if-last-no-one-joined-checkbox-others" checked>
            </div>

            <h5>Exchange Phase (Others):</h5>
            <div class="slider-group">
                <label for="max-trump-value-trumpfpackerl-select-others">Max Trump Value (for Trumpf-Packerl):</label>
                <select id="max-trump-value-trumpfpackerl-select-others">
                    <option value="7">7</option><option value="8">8</option><option value="9" selected>9</option><option value="X">X (10)</option><option value="U">U (Unter)</option>
                </select>
            </div>
             <div class="slider-group">
                <label for="consider-sau-if-planned-checkbox-others">Consider "4 auf die Sau" if Planned:</label>
                <input type="checkbox" id="consider-sau-if-planned-checkbox-others" checked>
            </div>

        </div>

        <!-- Simulation Run Controls Section -->
        <div id="simulation-controls-section" class="simulation-section">
            <h3>Run Simulation</h3>
            <div id="simulation-controls">
            <label for="simulation-games-input">Number of Games:</label>
            <input type="number" id="simulation-games-input" name="numGames" min="1" max="1000000" value="1000" style="width: 80px;">
            <button id="run-simulation-button">Run Simulation</button>
        </div>
        <div id="simulation-progress-container" style="display: none; margin-top: 10px;">
            <div id="simulation-progress-bar-fill"></div>
            <span id="simulation-progress-text">0%</span>
        </div>
        </div>

         <!-- Simulation Results Section -->
        <div id="simulation-results-container" class="simulation-section" style="display: none;">
            <h3>Simulation Results (Text)</h3>
            <pre id="simulation-results-output">Awaiting simulation...</pre>
        </div>

        <!-- Simulation Bar Chart Section -->
        <div id="simulation-chart-container" class="simulation-section" style="display: none;">
            <h3>Simulation Point Totals (Bar Chart)</h3>
            <div id="bar-chart-area">
                <!-- Bar chart will be dynamically generated here by JavaScript -->
            </div>
        </div>

    </div>

    <script type="module" src="js/script.js"></script>

</body>
</html>